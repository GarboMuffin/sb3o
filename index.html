<!DOCTYPE html>
<html>
  <head>

  </head>
  <body>
    <p>
      <input type="file" accept=".sb3">
    </p>
    <script src="dist/main.js"></script>
    <script>
      document.querySelector('input[type=file]').onchange = (e) => {
        const fr = new FileReader();
        fr.onload = () => {
          sb3o(fr.result)
            .then((o) => {
              console.log(o);
              const url = URL.createObjectURL(new Blob([o], {type: 'application/x.scratch.sb3'}));
              const link = document.createElement('a');
              link.href = url;
              link.download = 'optimized.sb3';
              document.body.appendChild(link);
              link.click();
              setTimeout(() => {
                link.remove();
                URL.revokeObjectURL(url);
              }, 500);
            })
            .catch((err) => {
              alert(err);
            });
        }
        fr.readAsArrayBuffer(e.target.files[0]);
      };
    </script>
  </body>
</html>
